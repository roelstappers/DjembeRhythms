<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" name="robots" content="noindex">
    <meta http-equiv="Cache-Control" content="no-cache" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.min.js" integrity="sha512-Siyxh4gyNM5SaERNa9BOZSPcu/auHyFUWn9OVFD7MxI3/dVPQklE7tfqS+pLmPHF1zo6UdDaJAp/thihrf0c7w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <title> Djembe Rhythms</title>
    <link rel="icon" type="image/x-icon" href="favicon.jpeg">
   <!---  <embed type="text/html" src="nav.html"> --->

  </head>

<body>
  <input type="range" min="100" max="300" value="200" class="slider" id="sliderbpm">
    <button id="play-button">Play/Pause</button>
    <div id="sliderAmount"> </div>

<script>

const panner1 = new Tone.Panner(-0.5).toDestination();
const panner2 = new Tone.Panner(0.5).toDestination();

djembe1 = { 
   T : new Tone.Player("./wav/tone1.wav").connect(panner1),
   S : new Tone.Player("./wav/slap1.wav").connect(panner1),
   B : new Tone.Player("./wav/bass1.wav").connect(panner1),
   t : new Tone.Player("./wav/tone2.wav").connect(panner1),
   s : new Tone.Player("./wav/slap2.wav").connect(panner1),
   b : new Tone.Player("./wav/bass2.wav").connect(panner1),
};

djembe2 = { 
   T : new Tone.Player("./wav/tone1.wav").connect(panner2),
   S : new Tone.Player("./wav/slap1.wav").connect(panner2),
   B : new Tone.Player("./wav/bass1.wav").connect(panner2),
   t : new Tone.Player("./wav/tone2.wav").connect(panner2),
   s : new Tone.Player("./wav/slap2.wav").connect(panner2),
   b : new Tone.Player("./wav/bass2.wav").connect(panner2),
};



Tone.Transport.bpm.value=180
Tone.Transport.timeSignature = 3;
Tone.Transport.humanize=1;

metronoom="1-----2-----3-----4-----"
rhythm1  ="B--t-sB---s-BtTtTtB---s-"
rhythm2  ="B--t-sB-TtTtB--t--B-TtTt"
indices = new Array(); 

for (let i=0; i < rhythm1.length; i++) { indices.push(i)}


//rhythmarray=rhythm.split("")

//Tone.scheduleRepeat(playrhythm,1/3)

const seq = new Tone.Sequence((time, idx) => {
  //console.log(djembe.get(note))
  console.log(rhythm1[idx])
  if (rhythm1[idx] != "-") {  djembe1[rhythm1[idx]].start(time);} 
  if (rhythm2[idx] != "-") {  djembe2[rhythm2[idx]].start(time);}  
},  indices ).start(0);




document.getElementById("play-button").addEventListener("click", function() {
  if (Tone.Transport.state !== 'started') {
    Tone.Transport.start();
  } else {
    Tone.Transport.stop();
  }
});

var slider =  document.getElementById("sliderbpm")
var sliderDiv = document.getElementById("sliderAmount")
slider.onchange= function() {Tone.Transport.bpm.value = this.value;  sliderDiv.innerHTML = "BPM " + this.value};

</script>


</body>